{"metadata":{},"options":{"plugins":[{"key":"base$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"base$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$4","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$9","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$10","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/core/server/users/on-creation.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/modules/core/server/users/on-creation.jsx","filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/core/server/users/on-creation.jsx","passPerPreset":false,"envName":"development","cwd":"/home/blackstoneteam/repos/viralizing-web/app","root":"/home/blackstoneteam/repos/viralizing-web/app","presets":[],"generatorOpts":{"filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/core/server/users/on-creation.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/modules/core/server/users/on-creation.jsx"}},"code":"Accounts.onCreateUser(function (options, user) {\n  //console.log(\"USER_CREATE\", user);\n  let isSocial = false;\n  let socialProfile = {\n    name: null,\n    lname: null,\n    email: null,\n    avatar: null\n  },\n      serviceData,\n      serviceName;\n\n  if (user.services) {\n    if (user.services.facebook) {\n      serviceName = \"facebook\";\n      isSocial = true;\n      serviceData = user.services.facebook;\n      socialProfile.name = serviceData.first_name;\n      socialProfile.lname = serviceData.last_name;\n      socialProfile.email = serviceData.email;\n      socialProfile.avatar = \"http://graph.facebook.com/\" + serviceData.id + \"/picture/?type=large\";\n    }\n\n    if (user.services.google) {\n      serviceName = \"google\";\n      isSocial = true;\n      serviceData = user.services.google;\n      socialProfile.name = serviceData.given_name;\n      socialProfile.lname = serviceData.family_name;\n      socialProfile.email = serviceData.email;\n      socialProfile.avatar = serviceData.picture;\n    }\n\n    if (user.services.twitter) {\n      serviceName = \"twitter\";\n      isSocial = true;\n      serviceData = user.services.twitter;\n      socialProfile.name = serviceData.screenName;\n      socialProfile.avatar = serviceData.profile_image_url_https;\n    }\n\n    if (user.services.instagram) {\n      serviceName = \"instagram\";\n      isSocial = true;\n      serviceData = user.services.instagram;\n      socialProfile.name = serviceData.full_name;\n      socialProfile.avatar = serviceData.profile_picture;\n    }\n  }\n\n  if (!user.profile) {\n    user.profile = {};\n  }\n\n  if (isSocial) {\n    user.profile.name = socialProfile.name;\n    user.profile.lastName = socialProfile.lname;\n    user.profile.avatar = socialProfile.avatar; //Insert Email\n\n    if (socialProfile.email) {\n      let email = {\n        address: socialProfile.email,\n        verified: true\n      };\n      user.emails = [email];\n    } //TODO: REVIEW THIS\n\n    /*Meteor.call(\"profile-create\", user, {\n        serviceName,\n        serviceData\n    })*/\n\n  }\n\n  return user;\n});","map":{"version":3,"sources":["imports/modules/core/server/users/on-creation.jsx"],"names":["Accounts","onCreateUser","options","user","isSocial","socialProfile","name","lname","email","avatar","serviceData","serviceName","services","facebook","first_name","last_name","id","google","given_name","family_name","picture","twitter","screenName","profile_image_url_https","instagram","full_name","profile_picture","profile","lastName","address","verified","emails"],"mappings":"AACAA,SAASC,YAAT,CAAsB,UAASC,OAAT,EAAkBC,IAAlB,EAAwB;AAE1C;AACA,MAAIC,WAAS,KAAb;AACA,MAAIC,gBAAc;AACVC,UAAK,IADK;AAEVC,WAAM,IAFI;AAGVC,WAAM,IAHI;AAIVC,YAAO;AAJG,GAAlB;AAAA,MAMIC,WANJ;AAAA,MAOIC,WAPJ;;AAQA,MAAGR,KAAKS,QAAR,EAAiB;AAEb,QAAGT,KAAKS,QAAL,CAAcC,QAAjB,EAA0B;AACtBF,oBAAY,UAAZ;AACAP,iBAAS,IAAT;AACAM,oBAAYP,KAAKS,QAAL,CAAcC,QAA1B;AACAR,oBAAcC,IAAd,GAAmBI,YAAYI,UAA/B;AACAT,oBAAcE,KAAd,GAAoBG,YAAYK,SAAhC;AACAV,oBAAcG,KAAd,GAAoBE,YAAYF,KAAhC;AACAH,oBAAcI,MAAd,GAAqB,+BAA6BC,YAAYM,EAAzC,GAA4C,sBAAjE;AACH;;AACD,QAAGb,KAAKS,QAAL,CAAcK,MAAjB,EAAwB;AACpBN,oBAAY,QAAZ;AACAP,iBAAS,IAAT;AACAM,oBAAYP,KAAKS,QAAL,CAAcK,MAA1B;AACAZ,oBAAcC,IAAd,GAAmBI,YAAYQ,UAA/B;AACAb,oBAAcE,KAAd,GAAoBG,YAAYS,WAAhC;AACAd,oBAAcG,KAAd,GAAoBE,YAAYF,KAAhC;AACAH,oBAAcI,MAAd,GAAqBC,YAAYU,OAAjC;AACH;;AAED,QAAGjB,KAAKS,QAAL,CAAcS,OAAjB,EAAyB;AACrBV,oBAAY,SAAZ;AACAP,iBAAS,IAAT;AACAM,oBAAYP,KAAKS,QAAL,CAAcS,OAA1B;AACAhB,oBAAcC,IAAd,GAAmBI,YAAYY,UAA/B;AACAjB,oBAAcI,MAAd,GAAqBC,YAAYa,uBAAjC;AACH;;AAED,QAAGpB,KAAKS,QAAL,CAAcY,SAAjB,EAA2B;AACvBb,oBAAY,WAAZ;AACAP,iBAAS,IAAT;AACAM,oBAAYP,KAAKS,QAAL,CAAcY,SAA1B;AACAnB,oBAAcC,IAAd,GAAmBI,YAAYe,SAA/B;AACApB,oBAAcI,MAAd,GAAqBC,YAAYgB,eAAjC;AACH;AACJ;;AAGD,MAAG,CAACvB,KAAKwB,OAAT,EAAiB;AACbxB,SAAKwB,OAAL,GAAa,EAAb;AACH;;AAED,MAAGvB,QAAH,EAAY;AACRD,SAAKwB,OAAL,CAAarB,IAAb,GAAkBD,cAAcC,IAAhC;AACAH,SAAKwB,OAAL,CAAaC,QAAb,GAAsBvB,cAAcE,KAApC;AACAJ,SAAKwB,OAAL,CAAalB,MAAb,GAAoBJ,cAAcI,MAAlC,CAHQ,CAKR;;AACA,QAAGJ,cAAcG,KAAjB,EAAuB;AACnB,UAAIA,QAAQ;AACRqB,iBAASxB,cAAcG,KADf;AAERsB,kBAAU;AAFF,OAAZ;AAIA3B,WAAK4B,MAAL,GAAc,CAACvB,KAAD,CAAd;AACH,KAZO,CAcR;;AACA;;;;;AAIH;;AAGD,SAAOL,IAAP;AACH,CA9ED","sourcesContent":["\nAccounts.onCreateUser(function(options, user) {\n\n    //console.log(\"USER_CREATE\", user);\n    let isSocial=false;\n    let socialProfile={\n            name:null,\n            lname:null,\n            email:null,\n            avatar:null\n        },\n        serviceData,\n        serviceName;\n    if(user.services){\n\n        if(user.services.facebook){\n            serviceName=\"facebook\";\n            isSocial=true;\n            serviceData=user.services.facebook;\n            socialProfile.name=serviceData.first_name;\n            socialProfile.lname=serviceData.last_name;\n            socialProfile.email=serviceData.email;\n            socialProfile.avatar=\"http://graph.facebook.com/\"+serviceData.id+\"/picture/?type=large\";\n        }\n        if(user.services.google){\n            serviceName=\"google\";\n            isSocial=true;\n            serviceData=user.services.google;\n            socialProfile.name=serviceData.given_name;\n            socialProfile.lname=serviceData.family_name;\n            socialProfile.email=serviceData.email;\n            socialProfile.avatar=serviceData.picture;\n        }\n\n        if(user.services.twitter){\n            serviceName=\"twitter\";\n            isSocial=true;\n            serviceData=user.services.twitter;\n            socialProfile.name=serviceData.screenName;\n            socialProfile.avatar=serviceData.profile_image_url_https;\n        }\n\n        if(user.services.instagram){\n            serviceName=\"instagram\";\n            isSocial=true;\n            serviceData=user.services.instagram;\n            socialProfile.name=serviceData.full_name;\n            socialProfile.avatar=serviceData.profile_picture;\n        }\n    }\n\n\n    if(!user.profile){\n        user.profile={};\n    }\n\n    if(isSocial){\n        user.profile.name=socialProfile.name;\n        user.profile.lastName=socialProfile.lname;\n        user.profile.avatar=socialProfile.avatar;\n\n        //Insert Email\n        if(socialProfile.email){\n            let email = {\n                address: socialProfile.email,\n                verified: true\n            };\n            user.emails = [email];\n        }\n\n        //TODO: REVIEW THIS\n        /*Meteor.call(\"profile-create\", user, {\n            serviceName,\n            serviceData\n        })*/\n    }\n\n\n    return user;\n});\n"]},"sourceType":"script","hash":"68dd12531173b4b8be9f2c94a4e320feb63fc645"}
