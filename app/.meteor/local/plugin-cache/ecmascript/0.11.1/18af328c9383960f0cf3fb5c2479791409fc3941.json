{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$4","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$6","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$7","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/accounts/ui/components/invite/invite.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/modules/accounts/ui/components/invite/invite.jsx","filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/accounts/ui/components/invite/invite.jsx","passPerPreset":false,"envName":"development","cwd":"/home/blackstoneteam/repos/viralizing-web/app","root":"/home/blackstoneteam/repos/viralizing-web/app","generatorOpts":{"filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/accounts/ui/components/invite/invite.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/modules/accounts/ui/components/invite/invite.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/builtin/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/builtin/objectSpread\"));\n\nlet React;\nmodule.watch(require(\"react\"), {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet swal;\nmodule.watch(require(\"sweetalert2\"), {\n  default(v) {\n    swal = v;\n  }\n\n}, 1);\nlet Translate, I18n;\nmodule.watch(require(\"react-redux-i18n\"), {\n  Translate(v) {\n    Translate = v;\n  },\n\n  I18n(v) {\n    I18n = v;\n  }\n\n}, 2);\nlet Tooltip, OverlayTrigger;\nmodule.watch(require(\"react-bootstrap\"), {\n  Tooltip(v) {\n    Tooltip = v;\n  },\n\n  OverlayTrigger(v) {\n    OverlayTrigger = v;\n  }\n\n}, 3);\nlet SocialAvatar;\nmodule.watch(require(\"../../../../core/ui/components/social-avatar\"), {\n  default(v) {\n    SocialAvatar = v;\n  }\n\n}, 4);\nlet notie;\nmodule.watch(require(\"notie\"), {\n  default(v) {\n    notie = v;\n  }\n\n}, 5);\n\nlet getTranslation = key => {\n  return \"Accounts.edit.tabs.settings.\" + key;\n};\n\nclass AccountInvite extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      form: false,\n      email: \"\"\n    };\n    this.toggleMagangerForm = this.toggleMagangerForm.bind(this);\n    this.updateEmail = this.updateEmail.bind(this);\n    this.sendInvite = this.sendInvite.bind(this);\n  }\n\n  validateEmail(email) {\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.exec(email) ? true : false;\n  }\n\n  sendInvite() {\n    let {\n      email\n    } = this.state;\n\n    if (!this.validateEmail(email)) {\n      notie.alert(3, I18n.t(getTranslation(\"form.invite.error.invalid\")), 3);\n      return;\n    }\n\n    if (email === Meteor.user().emails[0].address) {\n      notie.alert(3, I18n.t(getTranslation(\"form.invite.error.self\")), 3);\n      return;\n    }\n\n    let newInvite = {\n      email,\n      account: this.props.account._id\n    };\n    let component = this;\n    Meteor.call(\"account-invite-create\", newInvite, function (err, res) {\n      if (err) {\n        if (err.error === 500) {\n          err.error = I18n.t(getTranslation(\"form.invite.error.failed\"));\n        }\n\n        notie.alert(3, err.reason || err.error, 3);\n        return;\n      }\n\n      component.props.refetch({\n        accountID: component.props.account._id\n      });\n      component.setState({\n        form: false\n      });\n      swal(I18n.t(getTranslation(\"form.invite.success.title\")), I18n.t(getTranslation(\"form.invite.success.description\")), \"success\");\n    }); //console.log(\"SEND_INVITE_TO\", email, this.props.account);\n  }\n\n  updateEmail(e) {\n    let val = e.target.value;\n    let newState = (0, _objectSpread2.default)({}, this.state);\n    newState.email = val;\n    this.setState(newState);\n  }\n\n  toggleMagangerForm() {\n    let newState = (0, _objectSpread2.default)({}, this.state);\n    newState.form = !newState.form;\n    this.setState(newState);\n  }\n\n  tooltipContent(content) {\n    return React.createElement(Tooltip, {\n      id: \"tooltip_content\"\n    }, content);\n  }\n\n  render() {\n    let {\n      manager,\n      hasInvite,\n      isOwner\n    } = this.props;\n    let managerName = (manager.profile.name || \"\") + \" \" + (manager.profile.lastName || \"\");\n    return React.createElement(\"div\", null, React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, React.createElement(\"div\", {\n      className: \"form-group\"\n    }, React.createElement(\"label\", {\n      htmlFor: \"informationName\"\n    }, React.createElement(Translate, {\n      value: getTranslation(\"form.manager.title\")\n    })), React.createElement(\"div\", {\n      className: \"form-avatar\"\n    }, React.createElement(SocialAvatar, {\n      avatar: manager.profile.avatar,\n      name: managerName,\n      size: \"50\"\n    }), React.createElement(\"div\", {\n      className: \"title\"\n    }, this.props.userId === manager._id ? React.createElement(Translate, {\n      value: getTranslation(\"form.manager.youAre\")\n    }) : managerName === \" \" ? manager.emails[0].address : managerName, hasInvite || !isOwner ? \"\" : React.createElement(OverlayTrigger, {\n      placement: \"top\",\n      overlay: this.tooltipContent(React.createElement(Translate, {\n        value: getTranslation(\"form.manager.edit\")\n      }))\n    }, React.createElement(\"i\", {\n      className: \"icon wb-edit\",\n      \"aria-hidden\": \"true\",\n      onClick: this.toggleMagangerForm\n    })))))), this.state.form && React.createElement(\"div\", null, React.createElement(\"div\", {\n      className: \"col-md-8\"\n    }, React.createElement(\"div\", {\n      className: \"form-group\"\n    }, React.createElement(\"label\", {\n      htmlFor: \"informationName\"\n    }, React.createElement(Translate, {\n      value: getTranslation(\"form.invite.title\")\n    })), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: I18n.t(getTranslation(\"form.invite.placeholder\")),\n      onChange: this.updateEmail\n    }))), React.createElement(\"div\", {\n      className: \"col-md-4\"\n    }, React.createElement(\"a\", {\n      className: \"btn btn-primary\",\n      style: {\n        marginTop: \"24px\"\n      },\n      onClick: this.sendInvite\n    }, React.createElement(Translate, {\n      value: getTranslation(\"form.invite.send\")\n    })))));\n  }\n\n}\n\nmodule.exportDefault(AccountInvite);","map":{"version":3,"sources":["imports/modules/accounts/ui/components/invite/invite.jsx"],"names":["React","module","watch","require","default","v","swal","Translate","I18n","Tooltip","OverlayTrigger","SocialAvatar","notie","getTranslation","key","AccountInvite","Component","constructor","state","form","email","toggleMagangerForm","bind","updateEmail","sendInvite","validateEmail","re","exec","alert","t","Meteor","user","emails","address","newInvite","account","props","_id","component","call","err","res","error","reason","refetch","accountID","setState","e","val","target","value","newState","tooltipContent","content","render","manager","hasInvite","isOwner","managerName","profile","name","lastName","avatar","userId","marginTop","exportDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport swal from \"sweetalert2\";\nimport {Translate, I18n} from \"react-redux-i18n\";\nimport {Tooltip, OverlayTrigger} from \"react-bootstrap\";\nimport SocialAvatar from \"../../../../core/ui/components/social-avatar\";\nimport notie from \"notie\";\n\nlet getTranslation = (key) => {\n    return \"Accounts.edit.tabs.settings.\" + key;\n};\n\nclass AccountInvite extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            form: false,\n            email: \"\"\n        };\n\n        this.toggleMagangerForm = this.toggleMagangerForm.bind(this);\n        this.updateEmail = this.updateEmail.bind(this);\n        this.sendInvite = this.sendInvite.bind(this);\n    }\n\n    validateEmail(email) {\n        let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.exec(email) ? true : false\n    }\n\n    sendInvite() {\n        let {email}=this.state;\n        if (!this.validateEmail(email)) {\n            notie.alert(3, I18n.t(getTranslation(\"form.invite.error.invalid\")), 3);\n            return;\n        }\n        if(email===Meteor.user().emails[0].address){\n            notie.alert(3, I18n.t(getTranslation(\"form.invite.error.self\")), 3);\n            return;\n        }\n        let newInvite = {\n            email,\n            account: this.props.account._id\n        };\n        let component = this;\n        Meteor.call(\"account-invite-create\", newInvite, function (err, res) {\n            if (err) {\n                if (err.error === 500) {\n                    err.error = I18n.t(getTranslation(\"form.invite.error.failed\"));\n                }\n                notie.alert(3, err.reason || err.error, 3);\n                return\n            }\n            component.props.refetch({\n                accountID: component.props.account._id\n            });\n            component.setState({form:false});\n            swal(\n                I18n.t(getTranslation(\"form.invite.success.title\")),\n                I18n.t(getTranslation(\"form.invite.success.description\")),\n                \"success\"\n            );\n\n        });\n        //console.log(\"SEND_INVITE_TO\", email, this.props.account);\n    }\n\n    updateEmail(e) {\n        let val = e.target.value;\n        let newState = {...this.state};\n        newState.email = val;\n        this.setState(newState);\n    }\n\n    toggleMagangerForm() {\n        let newState = {...this.state};\n        newState.form = !newState.form;\n        this.setState(newState);\n    }\n\n    tooltipContent(content) {\n        return <Tooltip id=\"tooltip_content\">{content}</Tooltip>\n    }\n\n    render() {\n        let {manager, hasInvite, isOwner}=this.props;\n        let managerName=(manager.profile.name || \"\") + \" \" + (manager.profile.lastName || \"\");\n        return (\n            <div>\n                <div className=\"col-md-12\">\n                    <div className=\"form-group\">\n                        <label htmlFor=\"informationName\">\n                            <Translate value={getTranslation(\"form.manager.title\")}/>\n                        </label>\n                        <div className=\"form-avatar\">\n                            <SocialAvatar avatar={manager.profile.avatar}\n                                          name={managerName}\n                                          size=\"50\"/>\n                            <div className=\"title\">\n                                {this.props.userId === manager._id ? <Translate\n                                        value={getTranslation(\"form.manager.youAre\")}/> : (managerName===\" \"?manager.emails[0].address:managerName)}\n\n                                {(hasInvite || !isOwner)?\"\":(\n                                        <OverlayTrigger placement=\"top\"\n                                                        overlay={this.tooltipContent(<Translate\n                                                            value={getTranslation(\"form.manager.edit\")}/>)}>\n                                            <i className=\"icon wb-edit\" aria-hidden=\"true\" onClick={this.toggleMagangerForm}/>\n                                        </OverlayTrigger>\n                                    )}\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {this.state.form && (\n                    <div>\n                        <div className=\"col-md-8\">\n                            <div className=\"form-group\">\n                                <label htmlFor=\"informationName\">\n                                    <Translate value={getTranslation(\"form.invite.title\")}/>\n                                </label>\n                                <input type=\"text\" className=\"form-control\"\n                                       placeholder={I18n.t(getTranslation(\"form.invite.placeholder\"))}\n                                       onChange={this.updateEmail}/>\n                            </div>\n                        </div>\n                        <div className=\"col-md-4\">\n                            <a className=\"btn btn-primary\" style={{marginTop: \"24px\"}} onClick={this.sendInvite}>\n                                <Translate value={getTranslation(\"form.invite.send\")}/>\n                            </a>\n                        </div>\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nexport default AccountInvite;"]},"sourceType":"script","hash":"18af328c9383960f0cf3fb5c2479791409fc3941"}
