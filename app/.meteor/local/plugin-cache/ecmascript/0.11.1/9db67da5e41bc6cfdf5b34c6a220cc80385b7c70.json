{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/core/ui/components/forms/input-video-gallery.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/modules/core/ui/components/forms/input-video-gallery.jsx","filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/core/ui/components/forms/input-video-gallery.jsx","passPerPreset":false,"envName":"development","cwd":"/home/blackstoneteam/repos/viralizing-web/app","root":"/home/blackstoneteam/repos/viralizing-web/app","generatorOpts":{"filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/core/ui/components/forms/input-video-gallery.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/modules/core/ui/components/forms/input-video-gallery.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar React;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 0);\nvar Translate, I18n;\nmodule.watch(require(\"react-redux-i18n\"), {\n  Translate: function (v) {\n    Translate = v;\n  },\n  I18n: function (v) {\n    I18n = v;\n  }\n}, 1);\nvar ListEmpty;\nmodule.watch(require(\"../list-empty\"), {\n  \"default\": function (v) {\n    ListEmpty = v;\n  }\n}, 2);\nvar swal;\nmodule.watch(require(\"sweetalert2\"), {\n  \"default\": function (v) {\n    swal = v;\n  }\n}, 3);\nvar ReactPlayer;\nmodule.watch(require(\"react-player\"), {\n  \"default\": function (v) {\n    ReactPlayer = v;\n  }\n}, 4);\nvar Button, ButtonGroup, DropdownButton, MenuItem, OverlayTrigger, Tooltip;\nmodule.watch(require(\"react-bootstrap\"), {\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  DropdownButton: function (v) {\n    DropdownButton = v;\n  },\n  MenuItem: function (v) {\n    MenuItem = v;\n  },\n  OverlayTrigger: function (v) {\n    OverlayTrigger = v;\n  },\n  Tooltip: function (v) {\n    Tooltip = v;\n  }\n}, 5);\n\nvar crateTooltip = function (message) {\n  return React.createElement(Tooltip, {\n    id: Number(new Date()) * Math.random() * 1000\n  }, message);\n};\n\nvar InputVideoGallery =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(InputVideoGallery, _React$Component);\n\n  function InputVideoGallery() {\n    var _this;\n\n    _this = _React$Component.call(this) || this;\n    _this.state = {\n      lightboxIsOpen: false,\n      currentVideo: null,\n      currentAlbum: 0\n    };\n    _this.addVideo = _this.addVideo.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.deleteVideo = _this.deleteVideo.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.togglePlayVideo = _this.togglePlayVideo.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.addAlbum = _this.addAlbum.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.deleteAlbum = _this.deleteAlbum.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.updateCurrentAlbum = _this.updateCurrentAlbum.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    return _this;\n  }\n\n  var _proto = InputVideoGallery.prototype;\n\n  _proto.renderGallery = function () {\n    function renderGallery() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          getTranslation = _this$props.getTranslation,\n          readOnly = _this$props.readOnly,\n          value = _this$props.input.value;\n      var albums = value;\n      var _this$state = this.state,\n          currentAlbum = _this$state.currentAlbum,\n          currentVideo = _this$state.currentVideo;\n      var album = albums[currentAlbum];\n      if (!album || album.content.length === 0) return React.createElement(ListEmpty, {\n        message: React.createElement(Translate, {\n          value: getTranslation(\"empty.message\")\n        }),\n        button: false,\n        callback: this.openModal\n      });\n      var gallery = album.content.map(function (video, i) {\n        return React.createElement(\"li\", {\n          key: i\n        }, React.createElement(\"div\", {\n          className: \"widget widget-shadow\"\n        }, React.createElement(\"figure\", {\n          className: \"widget-header overlay-hover overlay\"\n        }, React.createElement(ReactPlayer, {\n          url: video,\n          controls: false,\n          playing: currentVideo === i\n        }), React.createElement(\"figcaption\", {\n          className: \"overlay-panel overlay-background overlay-fade overlay-icon\"\n        }, React.createElement(\"a\", {\n          className: \"icon \" + (currentVideo === i ? \"fa-pause\" : \"fa-play\"),\n          onClick: function (e) {\n            return _this2.togglePlayVideo(i, e);\n          }\n        }), readOnly && React.createElement(\"a\", {\n          className: \"icon wb-trash\",\n          onClick: function (e) {\n            return _this2.deleteVideo(i, e);\n          }\n        })))));\n      });\n      return React.createElement(\"ul\", {\n        className: \"blocks blocks-100 blocks-xlg-3 blocks-md-2 blocks-sm-2 margin-top-20\"\n      }, gallery);\n    }\n\n    return renderGallery;\n  }();\n\n  _proto.togglePlayVideo = function () {\n    function togglePlayVideo(index, event) {\n      event.preventDefault();\n      var currentVideo = this.state.currentVideo;\n\n      if (typeof currentVideo === \"number\") {\n        index = null;\n      }\n\n      this.setState({\n        currentVideo: index\n      });\n    }\n\n    return togglePlayVideo;\n  }();\n\n  _proto.deleteVideo = function () {\n    function deleteVideo(index, event) {\n      event.preventDefault();\n      var _this$props2 = this.props,\n          getTranslation = _this$props2.getTranslation,\n          _this$props2$input = _this$props2.input,\n          value = _this$props2$input.value,\n          onChange = _this$props2$input.onChange;\n      var albums = (0, _toConsumableArray2.default)(value);\n      var currentAlbum = this.state.currentAlbum;\n      var component = this;\n      swal({\n        title: I18n.t(getTranslation(\"delete.title\")),\n        text: I18n.t(getTranslation(\"delete.title\")),\n        type: 'warning',\n        showCancelButton: true,\n        cancelButtonText: I18n.t(getTranslation(\"delete.cancel\")),\n        confirmButtonText: I18n.t(getTranslation(\"delete.confirm\"))\n      }).then(function () {\n        component.setState({\n          currentVideo: null\n        }, function () {\n          albums[currentAlbum] = (0, _objectSpread2.default)({}, albums[currentAlbum]);\n          albums[currentAlbum].content = albums[currentAlbum].content.filter(function (a, i) {\n            return i !== index;\n          });\n          onChange(albums);\n        });\n      });\n    }\n\n    return deleteVideo;\n  }();\n\n  _proto.addVideo = function () {\n    function addVideo() {\n      var component = this;\n      swal({\n        title: I18n.t(component.props.getTranslation(\"new.title\")),\n        input: 'text',\n        showCancelButton: true,\n        confirmButtonText: I18n.t(component.props.getTranslation(\"new.confirm\")),\n        cancelButtonText: I18n.t(component.props.getTranslation(\"new.cancel\"))\n      }).then(function (video) {\n        var _component$props$inpu = component.props.input,\n            value = _component$props$inpu.value,\n            onChange = _component$props$inpu.onChange;\n        var currentAlbum = component.state.currentAlbum;\n        var albums = (0, _toConsumableArray2.default)(value);\n        albums[currentAlbum] = (0, _objectSpread2.default)({}, albums[currentAlbum]);\n        albums[currentAlbum].content = (0, _toConsumableArray2.default)(albums[currentAlbum].content).concat([video]);\n        onChange(albums);\n      });\n    }\n\n    return addVideo;\n  }();\n\n  _proto.addAlbum = function () {\n    function addAlbum() {\n      var _this$props3 = this.props,\n          getTranslation = _this$props3.getTranslation,\n          _this$props3$input = _this$props3.input,\n          value = _this$props3$input.value,\n          onChange = _this$props3$input.onChange;\n      var albums = (0, _toConsumableArray2.default)(value);\n      var component = this;\n      swal({\n        title: I18n.t(getTranslation(\"newAlbum.title\")),\n        input: 'text',\n        showCancelButton: true,\n        confirmButtonText: I18n.t(getTranslation(\"newAlbum.confirm\")),\n        cancelButtonText: I18n.t(getTranslation(\"newAlbum.cancel\"))\n      }).then(function (name) {\n        var newAlbum = {\n          name: name,\n          content: []\n        };\n        component.setState({\n          currentVideo: null\n        }, function () {\n          onChange((0, _toConsumableArray2.default)(albums).concat([newAlbum]));\n        });\n      });\n    }\n\n    return addAlbum;\n  }();\n\n  _proto.deleteAlbum = function () {\n    function deleteAlbum() {\n      event.preventDefault();\n      var _this$props4 = this.props,\n          getTranslation = _this$props4.getTranslation,\n          _this$props4$input = _this$props4.input,\n          value = _this$props4$input.value,\n          onChange = _this$props4$input.onChange;\n      var albums = (0, _toConsumableArray2.default)(value);\n      var currentAlbum = this.state.currentAlbum;\n      var component = this;\n      swal({\n        title: I18n.t(getTranslation(\"delete.title\")),\n        text: I18n.t(getTranslation(\"delete.title\")),\n        type: 'warning',\n        showCancelButton: true,\n        cancelButtonText: I18n.t(getTranslation(\"delete.cancel\")),\n        confirmButtonText: I18n.t(getTranslation(\"delete.confirm\"))\n      }).then(function () {\n        albums.splice(currentAlbum, 1);\n        component.setState({\n          currentAlbum: component.state.currentAlbum - 1,\n          currentVideo: null\n        }, function () {\n          onChange(albums);\n        });\n        onChange(albums);\n      });\n    }\n\n    return deleteAlbum;\n  }();\n\n  _proto.updateCurrentAlbum = function () {\n    function updateCurrentAlbum(currentAlbum) {\n      var component = this;\n      return function () {\n        component.setState({\n          currentAlbum: currentAlbum,\n          currentVideo: null\n        });\n      };\n    }\n\n    return updateCurrentAlbum;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _this3 = this;\n\n      var _this$props5 = this.props,\n          getTranslation = _this$props5.getTranslation,\n          readOnly = _this$props5.readOnly,\n          value = _this$props5.input.value;\n      var albums = value;\n      var currentAlbum = this.state.currentAlbum;\n      return React.createElement(\"div\", null, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\"\n      }, React.createElement(\"h4\", null, React.createElement(Translate, {\n        value: getTranslation(\"title\")\n      }))), !readOnly && React.createElement(\"div\", {\n        className: \"col-md-8\"\n      }, React.createElement(ButtonGroup, {\n        bsClass: \"pull-right\"\n      }, React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        overlay: crateTooltip(React.createElement(Translate, {\n          value: getTranslation(\"list.newVideo\")\n        }))\n      }, React.createElement(Button, {\n        bsStyle: \"primary\",\n        onClick: this.addVideo\n      }, React.createElement(\"i\", {\n        className: \"fa fa-cloud-upload\",\n        \"aria-hidden\": \"true\"\n      }))), React.createElement(OverlayTrigger, {\n        placement: \"top\",\n        overlay: crateTooltip(React.createElement(Translate, {\n          value: getTranslation(\"delete.albumHelper\")\n        }))\n      }, React.createElement(Button, {\n        bsStyle: \"primary\",\n        onClick: this.deleteAlbum\n      }, React.createElement(\"i\", {\n        className: \"fa fa-trash-o\",\n        \"aria-hidden\": \"true\"\n      }))), albums[currentAlbum] ? React.createElement(DropdownButton, {\n        bsStyle: \"primary\",\n        title: albums[currentAlbum].name,\n        id: \"bg-nested-dropdown\"\n      }, albums.map(function (a, i) {\n        return React.createElement(MenuItem, {\n          key: i,\n          eventKey: i,\n          className: \"dropdown-item\",\n          onClick: _this3.updateCurrentAlbum(i)\n        }, a.name);\n      }), React.createElement(MenuItem, {\n        eventKey: \"new\",\n        className: \"dropdown-item\",\n        onClick: this.addAlbum\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus-circle\",\n        style: {\n          marginRight: 5\n        },\n        \"aria-hidden\": \"true\"\n      }), React.createElement(Translate, {\n        value: getTranslation(\"list.newAlbum\")\n      }))) : React.createElement(Button, {\n        bsStyle: \"primary\",\n        onClick: this.addAlbum\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus-circle\",\n        style: {\n          marginRight: 5\n        },\n        \"aria-hidden\": \"true\"\n      }), React.createElement(Translate, {\n        value: getTranslation(\"list.newAlbum\")\n      }))))), React.createElement(\"div\", {\n        className: \"spacer-20\"\n      }), React.createElement(\"div\", {\n        className: \"panel\"\n      }, React.createElement(\"div\", {\n        className: \"panel-body container-fluid\"\n      }, this.renderGallery())));\n    }\n\n    return render;\n  }();\n\n  return InputVideoGallery;\n}(React.Component);\n\nmodule.exportDefault(InputVideoGallery);","map":{"version":3,"sources":["imports/modules/core/ui/components/forms/input-video-gallery.jsx"],"names":["React","module","watch","require","v","Translate","I18n","ListEmpty","swal","ReactPlayer","Button","ButtonGroup","DropdownButton","MenuItem","OverlayTrigger","Tooltip","crateTooltip","message","Number","Date","Math","random","InputVideoGallery","state","lightboxIsOpen","currentVideo","currentAlbum","addVideo","bind","deleteVideo","togglePlayVideo","addAlbum","deleteAlbum","updateCurrentAlbum","renderGallery","props","getTranslation","readOnly","value","input","albums","album","content","length","openModal","gallery","map","video","i","e","index","event","preventDefault","setState","onChange","component","title","t","text","type","showCancelButton","cancelButtonText","confirmButtonText","then","filter","a","name","newAlbum","splice","render","marginRight","Component","exportDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Translate, I18n} from \"react-redux-i18n\";\nimport ListEmpty from \"../list-empty\";\nimport swal from 'sweetalert2';\nimport ReactPlayer from \"react-player\";\nimport {Button, ButtonGroup, DropdownButton, MenuItem, OverlayTrigger, Tooltip} from \"react-bootstrap\";\n\nconst crateTooltip = (message) => {\n    return <Tooltip id={(Number(new Date()) * Math.random() * 1000)}>{message}</Tooltip>\n};\nclass InputVideoGallery extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            lightboxIsOpen: false,\n            currentVideo: null,\n            currentAlbum: 0\n        };\n\n        this.addVideo = this.addVideo.bind(this);\n        this.deleteVideo = this.deleteVideo.bind(this);\n        this.togglePlayVideo = this.togglePlayVideo.bind(this);\n        this.addAlbum = this.addAlbum.bind(this);\n        this.deleteAlbum=this.deleteAlbum.bind(this);\n        this.updateCurrentAlbum = this.updateCurrentAlbum.bind(this);\n    }\n\n    renderGallery() {\n        const {getTranslation, readOnly, input: {value}} = this.props;\n        const albums = value;\n        const {currentAlbum, currentVideo} = this.state;\n        const album = albums[currentAlbum];\n\n        if (!album || album.content.length === 0) return (\n            <ListEmpty message={<Translate value={getTranslation(\"empty.message\")}/>} button={false}\n                       callback={this.openModal}/>\n        );\n\n        const gallery = album.content.map((video, i) => {\n            return (\n                <li key={i}>\n                    <div className=\"widget widget-shadow\">\n                        <figure className=\"widget-header overlay-hover overlay\">\n                            <ReactPlayer url={video} controls={false} playing={currentVideo===i}/>\n                            <figcaption className=\"overlay-panel overlay-background overlay-fade overlay-icon\">\n                                <a className={\"icon \"+(currentVideo===i?\"fa-pause\":\"fa-play\")} onClick={(e) => this.togglePlayVideo(i, e)}/>\n                                {readOnly && <a className=\"icon wb-trash\" onClick={(e) => this.deleteVideo(i, e)}/>}\n                            </figcaption>\n                        </figure>\n                    </div>\n                </li>\n            );\n        });\n\n        return (\n            <ul className=\"blocks blocks-100 blocks-xlg-3 blocks-md-2 blocks-sm-2 margin-top-20\">\n                {gallery}\n            </ul>\n        );\n    }\n\n    togglePlayVideo(index, event){\n        event.preventDefault();\n        let {currentVideo}=this.state;\n        if(typeof currentVideo===\"number\"){\n            index=null;\n        }\n        this.setState({currentVideo:index});\n    }\n\n    deleteVideo(index, event) {\n        event.preventDefault();\n        const {getTranslation, input: {value, onChange}} = this.props;\n        const albums = [...value];\n        const {currentAlbum} = this.state;\n        let component=this;\n        swal({\n            title: I18n.t(getTranslation(\"delete.title\")),\n            text: I18n.t(getTranslation(\"delete.title\")),\n            type: 'warning',\n            showCancelButton: true,\n            cancelButtonText: I18n.t(getTranslation(\"delete.cancel\")),\n            confirmButtonText: I18n.t(getTranslation(\"delete.confirm\"))\n        }).then(function () {\n            component.setState({currentVideo:null}, function(){\n                albums[currentAlbum] = {...albums[currentAlbum]};\n                albums[currentAlbum].content=albums[currentAlbum].content.filter((a,i)=>i!==index);\n                onChange(albums);\n            });\n        });\n    }\n\n    addVideo() {\n        let component = this;\n        swal({\n            title: I18n.t(component.props.getTranslation(\"new.title\")),\n            input: 'text',\n            showCancelButton: true,\n            confirmButtonText: I18n.t(component.props.getTranslation(\"new.confirm\")),\n            cancelButtonText: I18n.t(component.props.getTranslation(\"new.cancel\")),\n        }).then(function (video) {\n            const {input: {value, onChange}} = component.props;\n            const {currentAlbum} = component.state;\n            const albums = [...value];\n\n            albums[currentAlbum] = {...albums[currentAlbum]};\n            albums[currentAlbum].content = [...albums[currentAlbum].content, video];\n            onChange(albums);\n        });\n    }\n\n    addAlbum() {\n        const {getTranslation, input: {value, onChange}} = this.props;\n        const albums = [...value];\n        let component=this;\n        swal({\n            title: I18n.t(getTranslation(\"newAlbum.title\")),\n            input: 'text',\n            showCancelButton: true,\n            confirmButtonText: I18n.t(getTranslation(\"newAlbum.confirm\")),\n            cancelButtonText: I18n.t(getTranslation(\"newAlbum.cancel\")),\n        }).then(function (name) {\n            let newAlbum = {\n                name,\n                content: []\n            };\n            component.setState({currentVideo:null}, function(){\n                onChange([...albums, newAlbum]);\n            });\n        });\n\n    }\n\n    deleteAlbum() {\n        event.preventDefault();\n        const {getTranslation, input: {value, onChange}} = this.props;\n        const albums = [...value];\n        const {currentAlbum} = this.state;\n        let component=this;\n        swal({\n            title: I18n.t(getTranslation(\"delete.title\")),\n            text: I18n.t(getTranslation(\"delete.title\")),\n            type: 'warning',\n            showCancelButton: true,\n            cancelButtonText: I18n.t(getTranslation(\"delete.cancel\")),\n            confirmButtonText: I18n.t(getTranslation(\"delete.confirm\"))\n        }).then(function () {\n            albums.splice(currentAlbum,1);\n            component.setState({currentAlbum:(component.state.currentAlbum-1),currentVideo:null},function(){\n                onChange(albums);\n            });\n            onChange(albums);\n        });\n    }\n\n    updateCurrentAlbum(currentAlbum) {\n        let component = this;\n        return function () {\n            component.setState({currentAlbum,currentVideo:null});\n        }\n    }\n\n    render() {\n        const {getTranslation, readOnly, input: {value}} = this.props;\n        const albums = value;\n        const { currentAlbum } = this.state;\n        return (\n            <div>\n                <div className=\"row\">\n                    <div className=\"col-md-4\">\n                        <h4><Translate value={getTranslation(\"title\")}/></h4>\n                    </div>\n                    {!readOnly && (\n                        <div className=\"col-md-8\">\n                            <ButtonGroup bsClass=\"pull-right\">\n                                <OverlayTrigger placement=\"top\" overlay={crateTooltip(<Translate value={getTranslation(\"list.newVideo\")}/>)}>\n                                    <Button bsStyle=\"primary\" onClick={this.addVideo}>\n                                        <i className=\"fa fa-cloud-upload\" aria-hidden=\"true\"/>\n                                    </Button>\n                                </OverlayTrigger>\n                                <OverlayTrigger placement=\"top\" overlay={crateTooltip(<Translate\n                                    value={getTranslation(\"delete.albumHelper\")}/>)}>\n                                    <Button bsStyle=\"primary\" onClick={this.deleteAlbum}>\n                                        <i className=\"fa fa-trash-o\" aria-hidden=\"true\"/>\n                                    </Button>\n                                </OverlayTrigger>\n                                {albums[currentAlbum]?(\n                                    <DropdownButton bsStyle=\"primary\" title={albums[currentAlbum].name}\n                                                    id=\"bg-nested-dropdown\">\n                                        {albums.map((a, i) => (\n                                            <MenuItem key={i}\n                                                      eventKey={i}\n                                                      className=\"dropdown-item\"\n                                                      onClick={this.updateCurrentAlbum(i)}>{a.name}</MenuItem>\n                                        ))}\n                                        <MenuItem eventKey={\"new\"} className=\"dropdown-item\" onClick={this.addAlbum}>\n                                            <i className=\"fa fa-plus-circle\"\n                                               style={{marginRight:5}}\n                                               aria-hidden=\"true\"/>\n                                            <Translate value={getTranslation(\"list.newAlbum\")}/>\n                                        </MenuItem>\n\n                                    </DropdownButton>\n                                ):(\n                                    <Button bsStyle=\"primary\" onClick={this.addAlbum}>\n                                        <i className=\"fa fa-plus-circle\"\n                                           style={{marginRight:5}}\n                                           aria-hidden=\"true\"/>\n                                        <Translate\n                                            value={getTranslation(\"list.newAlbum\")}/>\n                                    </Button>\n                                )}\n\n                            </ButtonGroup>\n                        </div>\n                    )}\n                </div>\n                <div className=\"spacer-20\"/>\n                <div className=\"panel\">\n                    <div className=\"panel-body container-fluid\">\n                        {this.renderGallery()}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default InputVideoGallery;"]},"sourceType":"script","hash":"9db67da5e41bc6cfdf5b34c6a220cc80385b7c70"}
