{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$4","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$6","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$7","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/accounts/ui/components/account-pages/layout.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/modules/accounts/ui/components/account-pages/layout.jsx","filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/accounts/ui/components/account-pages/layout.jsx","passPerPreset":false,"envName":"development","cwd":"/home/blackstoneteam/repos/viralizing-web/app","root":"/home/blackstoneteam/repos/viralizing-web/app","generatorOpts":{"filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/accounts/ui/components/account-pages/layout.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/modules/accounts/ui/components/account-pages/layout.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/builtin/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/builtin/objectSpread\"));\n\nlet React;\nmodule.watch(require(\"react\"), {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet swal;\nmodule.watch(require(\"sweetalert2\"), {\n  default(v) {\n    swal = v;\n  }\n\n}, 1);\nlet Translate;\nmodule.watch(require(\"react-redux-i18n\"), {\n  Translate(v) {\n    Translate = v;\n  }\n\n}, 2);\n\nclass AccountPagesLayout extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      selected: []\n    };\n    this.selectPage = this.selectPage.bind(this);\n    this.connectPages = this.connectPages.bind(this);\n  }\n\n  selectPage(page) {\n    let component = this;\n    return function () {\n      console.log(\"SELECT_PAGE\");\n      let newState = (0, _objectSpread2.default)({}, component.state);\n      let index = newState.selected.indexOf(page);\n\n      if (index === -1) {\n        newState.selected.push(page);\n      } else {\n        newState.selected.splice(page, 1);\n      }\n\n      component.setState(newState);\n    };\n  }\n\n  connectPages() {\n    let {\n      accountID\n    } = this.props;\n    let component = this;\n    let pages = this.state.selected.map(p => p.id);\n    console.log(\"CONNECT_PAGES\", accountID, pages);\n    Meteor.call(\"connect-facebook-pages\", accountID, pages, function (err, res) {\n      console.log('CONNECT_WITH_CALLBACK', arguments);\n\n      if (err) {\n        if (err.error === 500) {\n          err.error = \"Failed to connect account.\";\n        }\n\n        notie.alert(3, err.error, 3);\n        return;\n      }\n\n      console.log(\"CONNECTION_SUCCESFUL\", res);\n      component.props.refetch().then(function () {\n        component.props.close(); //component.props.history.push(\"/accounts/edit/\" + res);\n      });\n    });\n  }\n\n  render() {\n    let {\n      pages\n    } = this.props;\n    return React.createElement(\"div\", null, React.createElement(\"div\", {\n      className: \"row pages-list\"\n    }, pages.map(page => React.createElement(\"div\", {\n      className: \"col-md-6 list-group-item \" + (this.state.selected.indexOf(page) == -1 ? \"\" : \"active\"),\n      key: page.id,\n      onClick: this.selectPage(page)\n    }, React.createElement(\"div\", {\n      className: \"selected\"\n    }, React.createElement(\"i\", {\n      className: \"icon wb-check\"\n    })), React.createElement(\"div\", {\n      className: \"media\"\n    }, React.createElement(\"div\", {\n      className: \"media-left\"\n    }, React.createElement(\"a\", {\n      className: \"avatar\",\n      href: \"javascript:void(0)\"\n    }, React.createElement(\"img\", {\n      className: \"img-fluid\",\n      src: page.picture,\n      alt: \"...\"\n    }))), React.createElement(\"div\", {\n      className: \"media-body\"\n    }, React.createElement(\"h4\", {\n      className: \"media-heading\"\n    }, page.name), React.createElement(\"small\", null, page.category)), React.createElement(\"div\", {\n      className: \"media-right\"\n    }))))), React.createElement(\"div\", {\n      className: \"row\"\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, React.createElement(\"a\", {\n      className: \"btn btn-primary pull-right\",\n      onClick: this.connectPages\n    }, \"Connect Pages\"))));\n  }\n\n}\n\nmodule.exportDefault(AccountPagesLayout);","map":{"version":3,"sources":["imports/modules/accounts/ui/components/account-pages/layout.jsx"],"names":["React","module","watch","require","default","v","swal","Translate","AccountPagesLayout","Component","constructor","state","selected","selectPage","bind","connectPages","page","component","console","log","newState","index","indexOf","push","splice","setState","accountID","props","pages","map","p","id","Meteor","call","err","res","arguments","error","notie","alert","refetch","then","close","render","picture","name","category","exportDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport swal from \"sweetalert2\";\nimport {Translate} from \"react-redux-i18n\";\n\nclass AccountPagesLayout extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            selected: []\n        };\n\n        this.selectPage = this.selectPage.bind(this);\n        this.connectPages=this.connectPages.bind(this);\n    }\n\n    selectPage(page) {\n        let component = this;\n        return function () {\n            console.log(\"SELECT_PAGE\");\n            let newState = {...component.state};\n            let index = newState.selected.indexOf(page);\n            if (index === -1) {\n                newState.selected.push(page);\n            } else {\n                newState.selected.splice(page, 1);\n            }\n            component.setState(newState);\n        }\n    }\n\n    connectPages(){\n        let {accountID}=this.props;\n        let component=this;\n        let pages=this.state.selected.map((p)=>p.id);\n        console.log(\"CONNECT_PAGES\", accountID, pages);\n        Meteor.call(\"connect-facebook-pages\", accountID, pages, function (err, res) {\n            console.log('CONNECT_WITH_CALLBACK', arguments);\n            if (err) {\n                if (err.error === 500) {\n                    err.error = \"Failed to connect account.\";\n                }\n                notie.alert(3, err.error, 3);\n                return\n            }\n            console.log(\"CONNECTION_SUCCESFUL\", res);\n            component.props.refetch().then(function () {\n                component.props.close();\n                //component.props.history.push(\"/accounts/edit/\" + res);\n            });\n        });\n    }\n\n    render() {\n        let {pages}=this.props;\n        return (\n            <div>\n                <div className=\"row pages-list\">\n                    {pages.map((page) => (\n                        <div className={\"col-md-6 list-group-item \"+(this.state.selected.indexOf(page)==-1?\"\":\"active\")} key={page.id} onClick={this.selectPage(page)}>\n                            <div className=\"selected\">\n                                <i className=\"icon wb-check\"/>\n                            </div>\n                            <div className=\"media\">\n                                <div className=\"media-left\">\n                                    <a className=\"avatar\" href=\"javascript:void(0)\">\n                                        <img className=\"img-fluid\" src={page.picture} alt=\"...\"/>\n                                    </a>\n                                </div>\n                                <div className=\"media-body\">\n                                    <h4 className=\"media-heading\">{page.name}</h4>\n                                    <small>{page.category}</small>\n                                </div>\n                                <div className=\"media-right\">\n\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-md-12\">\n                        <a className=\"btn btn-primary pull-right\" onClick={this.connectPages}>Connect Pages</a>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default AccountPagesLayout;"]},"sourceType":"script","hash":"4fac1b616c918c8c8a373e5aefde4957bed9b39e"}
