{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/agenda/ui/components/post-create/location.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/modules/agenda/ui/components/post-create/location.jsx","filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/agenda/ui/components/post-create/location.jsx","passPerPreset":false,"envName":"development","cwd":"/home/blackstoneteam/repos/viralizing-web/app","root":"/home/blackstoneteam/repos/viralizing-web/app","generatorOpts":{"filename":"/home/blackstoneteam/repos/viralizing-web/app/imports/modules/agenda/ui/components/post-create/location.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/modules/agenda/ui/components/post-create/location.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar React;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 0);\nvar withGoogleMap, GoogleMap, Marker;\nmodule.watch(require(\"react-google-maps\"), {\n  withGoogleMap: function (v) {\n    withGoogleMap = v;\n  },\n  GoogleMap: function (v) {\n    GoogleMap = v;\n  },\n  Marker: function (v) {\n    Marker = v;\n  }\n}, 1);\nvar InputGeolocation;\nmodule.watch(require(\"../../../../core/ui/components/forms/input-geolocation\"), {\n  \"default\": function (v) {\n    InputGeolocation = v;\n  }\n}, 2);\n\nvar PostLocation =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(PostLocation, _React$Component);\n\n  function PostLocation() {\n    var _this;\n\n    _this = _React$Component.call(this) || this;\n    _this.state = {\n      location: \"\",\n      markers: [{\n        position: {\n          lat: 19.4403823,\n          lng: -99.184876\n        },\n        defaultAnimation: 2\n      }],\n      center: {\n        lat: 19.4403823,\n        lng: -99.184876\n      }\n    };\n    _this.onMapMove = _this.onMapMove.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.saveLocation = _this.saveLocation.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.setPosition = _this.setPosition.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    return _this;\n  }\n\n  var _proto = PostLocation.prototype;\n\n  _proto.setPosition = function () {\n    function setPosition(position) {\n      var newState = (0, _objectSpread2.default)({}, this.state);\n      newState.center = position;\n      newState.markers = [{\n        position: position,\n        defaultAnimation: 2\n      }];\n      this.setState(newState);\n    }\n\n    return setPosition;\n  }();\n\n  _proto.onMapMove = function () {\n    function onMapMove() {\n      var component = this;\n      return function () {\n        var values = this.getCenter(),\n            lat = values.lat(),\n            lng = values.lng();\n        var geocoder = new google.maps.Geocoder();\n\n        var debouncedGeocoder = _.debounce(geocoder.geocode, 500);\n\n        component.setState({\n          coordinates: [lat, lng],\n          markers: [{\n            position: {\n              lat: lat,\n              lng: lng\n            },\n            defaultAnimation: 2\n          }]\n        });\n        debouncedGeocoder({\n          location: {\n            lat: lat,\n            lng: lng\n          }\n        }, function (res, status) {\n          if (status === 'OK') {\n            if (res[1]) {\n              component.setState({\n                location: res[0].formatted_address\n              });\n            } else {\n              component.setState({\n                location: \"Unknown Location\"\n              });\n            }\n          } else {\n            component.setState({\n              location: \"Unknown Location\"\n            });\n          }\n        });\n      };\n    }\n\n    return onMapMove;\n  }();\n\n  _proto.saveLocation = function () {\n    function saveLocation() {\n      this.props.close();\n      this.props.input.onChange(this.state.coordinates);\n    }\n\n    return saveLocation;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _this2 = this;\n\n      var Map = withGoogleMap(function (props) {\n        return React.createElement(GoogleMap, {\n          ref: props.onMapLoad,\n          defaultZoom: 14,\n          defaultCenter: _this2.state.center,\n          onDragEnd: props.onMapDrag\n        }, props.markers.map(function (marker, index) {\n          return React.createElement(Marker, (0, _extends2.default)({\n            key: index\n          }, marker));\n        }));\n      });\n      return React.createElement(\"div\", {\n        className: (this.props.open ? \"open\" : \"\") + \" panel location-panel panel-modal\",\n        style: {\n          background: \"#fff\"\n        }\n      }, React.createElement(\"div\", {\n        className: \"panel-body container-fluid padding-20\"\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(InputGeolocation, {\n        input: {\n          value: \"\",\n          onChange: function (a) {\n            return _this2.setPosition(a.geolocation);\n          }\n        },\n        types: []\n      }), this.state.location, this.props.open ? React.createElement(Map, {\n        containerElement: React.createElement(\"div\", {\n          style: {\n            height: \"300px\",\n            margin: \"20px 0\"\n          }\n        }),\n        mapElement: React.createElement(\"div\", {\n          style: {\n            height: \"300px\",\n            borderRadius: \".215rem\"\n          }\n        }),\n        onMapDrag: function () {},\n        markers: this.state.markers\n      }) : \"\", React.createElement(\"a\", {\n        className: \"btn btn-primary pull-right\",\n        onClick: this.saveLocation\n      }, \"Save\"))));\n    }\n\n    return render;\n  }();\n\n  return PostLocation;\n}(React.Component);\n\nmodule.exportDefault(PostLocation);","map":{"version":3,"sources":["imports/modules/agenda/ui/components/post-create/location.jsx"],"names":["React","module","watch","require","v","withGoogleMap","GoogleMap","Marker","InputGeolocation","PostLocation","state","location","markers","position","lat","lng","defaultAnimation","center","onMapMove","bind","saveLocation","setPosition","newState","setState","component","values","getCenter","geocoder","google","maps","Geocoder","debouncedGeocoder","_","debounce","geocode","coordinates","res","status","formatted_address","props","close","input","onChange","render","Map","onMapLoad","onMapDrag","map","marker","index","open","background","value","a","geolocation","height","margin","borderRadius","Component","exportDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withGoogleMap, GoogleMap, Marker} from \"react-google-maps\";\nimport InputGeolocation from \"../../../../core/ui/components/forms/input-geolocation\";\n\n\n\nclass PostLocation extends React.Component {\n    constructor() {\n        super();\n\n        this.state={\n            location:\"\",\n            markers: [{\n                position: {\n                    lat: 19.4403823,\n                    lng: -99.184876\n                },\n                defaultAnimation: 2,\n            }],\n            center: {\n                lat: 19.4403823,\n                lng: -99.184876\n            }\n        };\n\n        this.onMapMove=this.onMapMove.bind(this);\n        this.saveLocation=this.saveLocation.bind(this);\n        this.setPosition=this.setPosition.bind(this);\n    }\n    setPosition(position){\n        let newState={...this.state};\n        newState.center=position;\n        newState.markers=[\n            {\n                position,\n                defaultAnimation: 2,\n            }\n        ];\n        this.setState(newState)\n    }\n    onMapMove(){\n        const component = this;\n        return function(){\n            let values = this.getCenter(),\n                lat = values.lat(),\n                lng = values.lng();\n\n            const geocoder = new google.maps.Geocoder;\n            const debouncedGeocoder = _.debounce(geocoder.geocode,500);\n\n            component.setState({\n                coordinates:[lat,lng],\n                markers: [\n                    {\n                        position: {\n                            lat,\n                            lng,\n                        },\n                        defaultAnimation: 2,\n                    }\n                ]\n            });\n\n            debouncedGeocoder({location:{lat,lng}},function(res,status){\n                if (status === 'OK') {\n                    if (res[1]) {\n                        component.setState({location:res[0].formatted_address});\n                    } else {\n                        component.setState({location:\"Unknown Location\"});\n                    }\n                } else {\n                    component.setState({location:\"Unknown Location\"});\n                }\n            })\n        }\n    }\n    saveLocation() {\n        this.props.close();\n        this.props.input.onChange(this.state.coordinates);\n    }\n    render() {\n        const Map = withGoogleMap(props => {\n\n            return(\n                <GoogleMap\n                    ref={props.onMapLoad}\n                    defaultZoom={14}\n                    defaultCenter={this.state.center}\n                    onDragEnd={props.onMapDrag}\n                >\n                    {props.markers.map((marker, index) => (\n                        <Marker key={index}\n                                {...marker}\n                        />\n                    ))}\n                </GoogleMap>\n            )\n        });\n        return (\n            <div className={(this.props.open ? \"open\" : \"\") + \" panel location-panel panel-modal\"} style={{background: \"#fff\"}}>\n                <div className=\"panel-body container-fluid padding-20\">\n                    <div className=\"row\">\n                        <InputGeolocation input={{value:\"\", onChange:(a)=>this.setPosition(a.geolocation)}} types={[]}/>\n                        {this.state.location}\n                        {this.props.open?(<Map\n                                containerElement={\n                                    <div style={{ height: `300px`, margin:\"20px 0\" }} />\n                                }\n                                mapElement={\n                                    <div style={{ height: `300px`, borderRadius: \".215rem\" }} />\n                                }\n                                onMapDrag={()=>{}}\n                                markers={this.state.markers}\n                            />):\"\"}\n                        <a className=\"btn btn-primary pull-right\" onClick={this.saveLocation}>\n                            Save\n                        </a>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default PostLocation;"]},"sourceType":"script","hash":"2e12b379fef55c03b68628421f289241d88945ee"}
